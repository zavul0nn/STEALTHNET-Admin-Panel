# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Telegram –ë–æ—Ç–∞ –∏ –í–µ–±-–°–∞–π—Ç–∞

## üîÑ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–≤—è–∑—å –º–µ–∂–¥—É –±–æ—Ç–æ–º –∏ —Å–∞–π—Ç–æ–º

### –¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Telegram Bot   ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ  Flask API   ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ   Website   ‚îÇ
‚îÇ  (client_bot)   ‚îÇ        ‚îÇ   (app.py)   ‚îÇ        ‚îÇ  (React)    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ                          ‚îÇ                        ‚îÇ
         ‚îÇ                          ‚îÇ                        ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (SQLite)
                           –ü–æ–ª–µ: telegram_id
```

## üìã –°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–Ω–∞—á–∞–ª–∞ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª—Å—è –Ω–∞ —Å–∞–π—Ç–µ

**–®–∞–≥ 1: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ —Å–∞–π—Ç–µ**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ö–æ–¥–∏—Ç –Ω–∞ —Å–∞–π—Ç
- –í—ã–±–∏—Ä–∞–µ—Ç "–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Telegram" (Telegram Login Widget)
- Telegram Login Widget –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –Ω–∞ `/api/public/telegram-login`
- Flask API:
  - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –µ—Å—Ç—å –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º `telegram_id` –≤ –ë–î
  - –ï—Å–ª–∏ –Ω–µ—Ç - —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å `telegram_id`
  - –ï—Å–ª–∏ –µ—Å—Ç—å - –æ–±–Ω–æ–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ
  - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç JWT —Ç–æ–∫–µ–Ω

**–®–∞–≥ 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–æ—Ç–∞**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –±–æ—Ç–∞ –≤ Telegram
- –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `/start`
- –ë–æ—Ç –≤—ã–∑—ã–≤–∞–µ—Ç `/api/bot/get-token` —Å `telegram_id`
- Flask API –Ω–∞—Ö–æ–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ `telegram_id` –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JWT —Ç–æ–∫–µ–Ω
- –ë–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–∫–µ–Ω –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ `/api/client/me`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏ —Å–∞–π—Ç, –∏ –±–æ—Ç–∞

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–Ω–∞—á–∞–ª–∞ –∑–∞—à–µ–ª –≤ –±–æ—Ç–∞

**–¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –±–æ—Ç–∞
- –ë–æ—Ç –ø—ã—Ç–∞–µ—Ç—Å—è –Ω–∞–π—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ `telegram_id`
- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç –≤ –ë–î - –±–æ—Ç –Ω–µ –º–æ–∂–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å

**–†–µ—à–µ–Ω–∏–µ (–Ω—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å):**
1. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç –≤ –ë–î, –±–æ—Ç –¥–æ–ª–∂–µ–Ω:
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –µ—Å—Ç—å –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ RemnaWave API (—á–µ—Ä–µ–∑ BOT_API_URL)
   - –ï—Å–ª–∏ –µ—Å—Ç—å - —Å–æ–∑–¥–∞—Ç—å –∑–∞–ø–∏—Å—å –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π –ë–î
   - –ï—Å–ª–∏ –Ω–µ—Ç - –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ —Å–∞–π—Ç

2. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ:
   - –ë–æ—Ç –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç
   - –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—Ö–æ–¥–µ –Ω–∞ —Å–∞–π—Ç —á–µ—Ä–µ–∑ Telegram Login Widget –∞–∫–∫–∞—É–Ω—Ç —Å–≤—è–∂–µ—Ç—Å—è

---

## üîß –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### 1. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –Ω–∞ —Å–∞–π—Ç–µ (Telegram Login Widget)

**–§–∞–π–ª:** `app.py`, —Ñ—É–Ω–∫—Ü–∏—è `telegram_login()`

```python
@app.route('/api/public/telegram-login', methods=['POST'])
def telegram_login():
    # –ü–æ–ª—É—á–∞–µ—Ç telegram_id –æ—Ç Telegram Login Widget
    # –ò—â–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î –ø–æ telegram_id
    # –ï—Å–ª–∏ –Ω–µ—Ç - —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤–æ–≥–æ –∏–ª–∏ –∏—â–µ—Ç —á–µ—Ä–µ–∑ RemnaWave API
    # –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç JWT —Ç–æ–∫–µ–Ω
```

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. Telegram Login Widget –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. Flask API –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î
3. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç - –ø—ã—Ç–∞–µ—Ç—Å—è –Ω–∞–π—Ç–∏ —á–µ—Ä–µ–∑ RemnaWave API
4. –°–æ–∑–¥–∞–µ—Ç –∏–ª–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –∑–∞–ø–∏—Å—å –≤ –ë–î
5. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç JWT —Ç–æ–∫–µ–Ω

### 2. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤ –±–æ—Ç–µ

**–§–∞–π–ª:** `app.py`, —Ñ—É–Ω–∫—Ü–∏—è `bot_get_token()`

```python
@app.route('/api/bot/get-token', methods=['POST'])
def bot_get_token():
    # –ü–æ–ª—É—á–∞–µ—Ç telegram_id –æ—Ç –±–æ—Ç–∞
    # –ò—â–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î –ø–æ telegram_id
    # –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç JWT —Ç–æ–∫–µ–Ω
```

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `telegram_id` –Ω–∞ `/api/bot/get-token`
2. Flask API –∏—â–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î
3. –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JWT —Ç–æ–∫–µ–Ω
4. –ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É 404

**–§–∞–π–ª:** `client_bot.py`, —Ñ—É–Ω–∫—Ü–∏—è `get_user_token()`

```python
def get_user_token(telegram_id: int) -> Optional[str]:
    # –í—ã–∑—ã–≤–∞–µ—Ç /api/bot/get-token
    # –ö—ç—à–∏—Ä—É–µ—Ç —Ç–æ–∫–µ–Ω –≤ –ø–∞–º—è—Ç–∏
    # –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–∫–µ–Ω –∏–ª–∏ None
```

---

## ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º—ã —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–Ω–∞—á–∞–ª–∞ –∑–∞—à–µ–ª –≤ –±–æ—Ç–∞

**–°–∏–º–ø—Ç–æ–º—ã:**
- –ë–æ—Ç –Ω–µ –º–æ–∂–µ—Ç –Ω–∞–π—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É "–û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏"

**–†–µ—à–µ–Ω–∏–µ:**
–ù—É–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å `bot_get_token()` —á—Ç–æ–±—ã:
1. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç –≤ –ë–î - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å RemnaWave API
2. –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω –≤ RemnaWave - —Å–æ–∑–¥–∞—Ç—å –∑–∞–ø–∏—Å—å –≤ –ë–î
3. –ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω - –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

**–°–∏–º–ø—Ç–æ–º—ã:**
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞ —Å–∞–π—Ç–µ –Ω–µ —Å—Ä–∞–∑—É –≤–∏–¥–Ω—ã –≤ –±–æ—Ç–µ
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –±–æ—Ç–µ –Ω–µ —Å—Ä–∞–∑—É –≤–∏–¥–Ω—ã –Ω–∞ —Å–∞–π—Ç–µ

**–†–µ—à–µ–Ω–∏–µ:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å TTL
- –û—á–∏—â–∞—Ç—å –∫—ç—à –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö (RemnaWave API)

---

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é

### 1. –£–ª—É—á—à–∏—Ç—å `bot_get_token()` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

```python
@app.route('/api/bot/get-token', methods=['POST'])
def bot_get_token():
    telegram_id = request.json.get('telegram_id')
    user = User.query.filter_by(telegram_id=telegram_id).first()
    
    if not user:
        # –ü—ã—Ç–∞–µ–º—Å—è –Ω–∞–π—Ç–∏ —á–µ—Ä–µ–∑ RemnaWave API
        if BOT_API_URL and BOT_API_TOKEN:
            # –ò—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ RemnaWave
            # –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω - —Å–æ–∑–¥–∞–µ–º –∑–∞–ø–∏—Å—å –≤ –ë–î
            # –ï—Å–ª–∏ –Ω–µ—Ç - –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –æ—à–∏–±–∫—É —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π
        else:
            return jsonify({
                "message": "User not found. Please register via website first.",
                "register_url": "https://client.chrnet.ru/register"
            }), 404
    
    token = create_local_jwt(user.id)
    return jsonify({"token": token}), 200
```

### 2. –î–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –≤ –±–æ—Ç–µ

–ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç –≤ –ë–î, –Ω–æ –æ–Ω –µ—Å—Ç—å –≤ RemnaWave API:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Ç—å –∑–∞–ø–∏—Å—å –≤ –ë–î
- –°–≤—è–∑–∞—Ç—å —Å RemnaWave UUID
- –í–µ—Ä–Ω—É—Ç—å —Ç–æ–∫–µ–Ω

### 3. –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

–í –±–æ—Ç–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è:
- "–í—ã –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ —Å–∞–π—Ç–µ: [—Å—Å—ã–ª–∫–∞]"
- "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram Login Widget –Ω–∞ —Å–∞–π—Ç–µ"

---

## üìù –¢–µ–∫—É—â–∏–π –ø–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

### –°–∞–π—Ç ‚Üí –ë–æ—Ç
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –Ω–∞ —Å–∞–π—Ç–µ —á–µ—Ä–µ–∑ Telegram Login Widget
2. –í –ë–î —Å–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–ø–∏—Å—å —Å `telegram_id`
3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –±–æ—Ç–∞
4. –ë–æ—Ç –Ω–∞—Ö–æ–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ `telegram_id` –∏ –ø–æ–ª—É—á–∞–µ—Ç —Ç–æ–∫–µ–Ω

### –ë–æ—Ç ‚Üí –°–∞–π—Ç
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±–æ—Ç–∞
2. –ë–æ—Ç –¥–µ–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∫ Flask API —Å JWT —Ç–æ–∫–µ–Ω–æ–º
3. Flask API –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ–∫–µ–Ω –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∑–∞–π—Ç–∏ –Ω–∞ —Å–∞–π—Ç - –µ–≥–æ `telegram_id` —É–∂–µ –≤ –ë–î

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### JWT –¢–æ–∫–µ–Ω—ã
- –¢–æ–∫–µ–Ω—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ Flask API
- –°–æ–¥–µ—Ä–∂–∞—Ç `user_id` –∏ —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è (1 –¥–µ–Ω—å)
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ API –∑–∞–ø—Ä–æ—Å–æ–≤

### Telegram ID
- –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Telegram
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ —Å–≤—è–∑—É—é—â–µ–µ –∑–≤–µ–Ω–æ –º–µ–∂–¥—É –±–æ—Ç–æ–º –∏ —Å–∞–π—Ç–æ–º
- –•—Ä–∞–Ω–∏—Ç—Å—è –≤ –ë–î –≤ –ø–æ–ª–µ `User.telegram_id`

---

## üìä –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ User
```sql
- id (INTEGER, PRIMARY KEY)
- telegram_id (BIGINT, UNIQUE, NULLABLE)
- telegram_username (STRING, NULLABLE)
- email (STRING, UNIQUE, NULLABLE)
- remnawave_uuid (STRING, UNIQUE, NOT NULL)
- ...
```

**–°–≤—è–∑—å:**
- `telegram_id` - —Å–≤—è–∑—ã–≤–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Telegram —Å –∑–∞–ø–∏—Å—å—é –≤ –ë–î
- `remnawave_uuid` - —Å–≤—è–∑—ã–≤–∞–µ—Ç —Å RemnaWave API

---

## üõ†Ô∏è –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î
```python
user = User.query.filter_by(telegram_id=123456789).first()
print(user.email, user.remnawave_uuid)
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–æ–∫–µ–Ω
```bash
curl -X POST http://localhost:5000/api/bot/get-token \
  -H "Content-Type: application/json" \
  -d '{"telegram_id": 123456789}'
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –Ω–∞ —Å–∞–π—Ç–µ
```bash
curl -X POST http://localhost:5000/api/public/telegram-login \
  -H "Content-Type: application/json" \
  -d '{"id": 123456789, "hash": "...", ...}'
```

